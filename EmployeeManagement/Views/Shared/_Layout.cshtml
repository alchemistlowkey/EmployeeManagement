@inject SignInManager<ApplicationUser> signInManager;

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <link
    rel="stylesheet"
    href="~/css/site.min.css"
    asp-append-version="true"
  />
  <environment include="Development">
    <link
      rel="stylesheet"
      href="~/lib/bootstrap/css/bootstrap.min.css"
    />
    <script src="~/lib/jquery/jquery.js"></script>
    <script src="~/lib/jquery-validate/jquery-validate.js"></script>
    <script src="~/lib/jquery-validation/jquery-validate.unobstrusive.js"></script>
    <script src="~/lib/bootstrap/js/bootstrap.js"></script>
    <script src="~/lib/bootstrap/js/bootstrap.bundle.js"></script>
  </environment>
  <environment exclude="Development">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
      asp-fallback-href="~/lib/bootstrap/css/bootstrap.min.css"
      asp-fallback-test-class="sr-only"
      asp-fallback-test-property="position"
      asp-fallback-test-value="absolute"
      asp-suppress-fallback-integrity="true"
    />
    <!-- <script
        src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
        crossorigin="anonymous"
        asp-fallback-src="~/lib/jquery/jquery.js"
        asp-suppress-fallback-integrity="true"
      ></script> -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
      asp-fallback-src="~/lib/bootstrap/js/bootstrap.js"
      asp-suppress-fallback-integrity="true"
    ></script>
  </environment>
  <title>@ViewBag.Title</title>
</head>

<body>
  <div class="container">
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark px-2">
      <a
        class="navbar-brand"
        asp-controller="home"
        asp-action="index"
      >
        <img
          src="~/images/logo.png"
          alt="Logo"
          height="30px"
          width="30px"
          asp-append-version="true"
        />
      </a>
      <button
        type="button"
        class="navbar-toggler"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div
        class="collapse navbar-collapse"
        id="navbarNav"
      >
        <ul class="navbar-nav">
          <li class="nav-item">
            <a
              class="nav-link"
              asp-controller="home"
              asp-action="index"
            >
              List
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              asp-controller="home"
              asp-action="create"
            >
              Create
            </a>
          </li>

          @if ((signInManager.IsSignedIn(User) && User.IsInRole("Admin")) || (signInManager.IsSignedIn(User) &&
                    User.IsInRole("Super Admin")))
          {
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                id="navbarDropdownMenuLink"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                href="#"
              >
                Manage
              </a>
              <ul
                class="dropdown-menu"
                aria-labelledby="navbarDropdownMenuLink"
              >
                <li>
                  <a
                    class="dropdown-item"
                    asp-controller="Administration"
                    asp-action="ListUsers"
                  >
                    Users
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    asp-controller="Administration"
                    asp-action="ListRoles"
                  >
                    Roles
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    asp-controller="Account"
                    asp-action="ChangePassword"
                  >
                    Password
                  </a>
                </li>
              </ul>
            </li>
          }

        </ul>
        <ul class="navbar-nav ms-auto">
          @if (signInManager.IsSignedIn(User))
          {
            <li class="nav-item">
              <form
                asp-controller="account"
                asp-action="logout"
                method="post"
              >
                <button
                  type="submit"
                  class="nav-link btn btn-link py-0"
                >
                  Logout @User?.Identity?.Name
                </button>
              </form>
            </li>
          }
          else
          {
            <li class="nav-item">
              <a
                class="nav-link"
                asp-controller="account"
                asp-action="register"
              >
                Register
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                asp-controller="account"
                asp-action="login"
              >
                Login
              </a>
            </li>
          }
        </ul>
      </div>
    </nav>
    <div class="">@RenderBody()</div>

    <script src="~/js/CustomScript.js"></script>

    @if (IsSectionDefined("Scripts"))
    {
      @RenderSection("Scripts", required:
      true)
        }
  </div>
</body>

</html>